# =============================================================================
# CBAHI Clinical Privileges Management System
# Environment Variables Configuration
# =============================================================================
#
# This file documents all environment variables used by the application.
# Copy this file to .env.local for local development.
# For production deployment on Railway, configure these in the Railway dashboard.
#
# IMPORTANT: Never commit actual secrets to version control!
# =============================================================================

# =============================================================================
# APPLICATION SETTINGS
# =============================================================================

# Node environment: development | production | test
NODE_ENV=development

# Application URL (used for generating absolute URLs)
NEXT_PUBLIC_APP_URL=http://localhost:3000
APP_BASE_URL=http://localhost:3000

# Application name displayed in UI
NEXT_PUBLIC_APP_NAME="CBAHI Clinical Privileges"

# Support email for error pages and contact
SUPPORT_EMAIL=support@cbahi.gov.sa

# =============================================================================
# DATABASE (PostgreSQL with Prisma)
# =============================================================================

# PostgreSQL connection string
# Format: postgresql://USER:PASSWORD@HOST:PORT/DATABASE?schema=public
#
# For Railway: Use the DATABASE_URL provided by Railway PostgreSQL plugin
# For local: postgresql://cbahi_user:cbahi_password@localhost:5432/cbahi_db
DATABASE_URL="postgresql://user:password@localhost:5432/cbahi_db?schema=public"

# =============================================================================
# AUTHENTICATION (NextAuth.js)
# =============================================================================

# REQUIRED: Base URL for NextAuth callbacks
# Must match your deployment URL exactly
NEXTAUTH_URL=http://localhost:3000

# REQUIRED: Secret for signing cookies and tokens
# Generate with: openssl rand -base64 32
# IMPORTANT: Must be the same across all instances in production
NEXTAUTH_SECRET=your-super-secret-key-change-in-production

# =============================================================================
# GOOGLE OAUTH & DRIVE API
# =============================================================================

# Google OAuth 2.0 credentials (for user authentication)
# Create at: https://console.cloud.google.com/apis/credentials
GOOGLE_CLIENT_ID=your-google-client-id.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=your-google-client-secret

# OAuth redirect URI (must be configured in Google Console)
GOOGLE_REDIRECT_URI=http://localhost:3000/api/auth/callback/google

# Google Drive Service Account (for document management)
# Create a service account at: https://console.cloud.google.com/iam-admin/serviceaccounts
# Download the JSON key file and use the values below

# Service account email (e.g., cbahi-drive@project-id.iam.gserviceaccount.com)
GOOGLE_SERVICE_ACCOUNT_EMAIL=your-service-account@project.iam.gserviceaccount.com

# Service account private key (from JSON key file)
# Include the full key with -----BEGIN PRIVATE KEY----- and -----END PRIVATE KEY-----
# Keep newlines as \n
GOOGLE_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----\nYour private key here\n-----END PRIVATE KEY-----"

# Full service account JSON key (alternative to individual fields above)
# Base64 encode the entire JSON key file contents
GOOGLE_SERVICE_ACCOUNT_KEY=

# Google Drive root folder ID (where documents will be stored)
# Find in Google Drive URL: https://drive.google.com/drive/folders/{FOLDER_ID}
GOOGLE_DRIVE_FOLDER_ID=your-google-drive-folder-id

# =============================================================================
# MICROSOFT AZURE AD & GRAPH API (Optional)
# =============================================================================

# Azure AD application credentials
# Create at: https://portal.azure.com/#blade/Microsoft_AAD_RegisteredApps
AZURE_AD_CLIENT_ID=your-azure-client-id
AZURE_AD_CLIENT_SECRET=your-azure-client-secret
AZURE_AD_TENANT_ID=your-azure-tenant-id

# Microsoft Graph API scopes
MICROSOFT_GRAPH_API_SCOPES="User.Read Mail.Send Files.ReadWrite.All"

# =============================================================================
# EMAIL CONFIGURATION (SMTP / Nodemailer)
# =============================================================================

# Email server connection string (for NextAuth magic links)
# Format: smtp://username:password@smtp.example.com:587
EMAIL_SERVER=smtp://username:password@smtp.gmail.com:587

# SMTP configuration (for application notifications)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=your-email@gmail.com
SMTP_PASSWORD=your-app-password

# From address for all outgoing emails
EMAIL_FROM="CBAHI System <noreply@cbahi.gov.sa>"

# =============================================================================
# JISR HR API INTEGRATION
# =============================================================================

# Jisr API credentials for HR data synchronization
# Obtain from your Jisr administrator
JISR_API_URL=https://api.jisr.net
JISR_API_KEY=your-jisr-api-key
JISR_SLUG=your-company-slug
JISR_ACCESS_TOKEN=your-jisr-access-token

# Sync interval in hours (default: 24)
JISR_SYNC_INTERVAL_HOURS=24

# =============================================================================
# INTERNATIONALIZATION (i18n)
# =============================================================================

# Default locale for the application
NEXT_PUBLIC_DEFAULT_LOCALE=en

# Supported locales (comma-separated)
NEXT_PUBLIC_SUPPORTED_LOCALES=en,ar

# =============================================================================
# FEATURE FLAGS
# =============================================================================

# Enable/disable integrations
NEXT_PUBLIC_ENABLE_GOOGLE_DRIVE=true
NEXT_PUBLIC_ENABLE_MICROSOFT_GRAPH=true
NEXT_PUBLIC_ENABLE_EMAIL_NOTIFICATIONS=true
NEXT_PUBLIC_ENABLE_JISR_SYNC=true

# =============================================================================
# SESSION & SECURITY
# =============================================================================

# Session duration in seconds (default: 24 hours)
SESSION_MAX_AGE=86400

# Bcrypt salt rounds for password hashing
BCRYPT_SALT_ROUNDS=12

# =============================================================================
# ESCALATION CONFIGURATION
# =============================================================================

# Enable escalation notifications
ESCALATION_ENABLED=true

# Escalation thresholds in days
ESCALATION_LEVEL1_DAYS=3
ESCALATION_LEVEL2_DAYS=5
ESCALATION_LEVEL3_DAYS=7

# HR email for level 3 escalations
ESCALATION_HR_EMAIL=hr@cbahi.gov.sa

# =============================================================================
# LOGGING & MONITORING
# =============================================================================

# Log level: debug | info | warn | error
LOG_LEVEL=info

# Sentry DSN for error tracking (optional)
# SENTRY_DSN=https://xxxxx@sentry.io/xxxxx

# =============================================================================
# RATE LIMITING
# =============================================================================

# Maximum requests per window
RATE_LIMIT_MAX_REQUESTS=100

# Rate limit window in milliseconds (default: 1 minute)
RATE_LIMIT_WINDOW_MS=60000

# =============================================================================
# DEVELOPMENT / TESTING
# =============================================================================

# Enable testing mode (routes notifications to test email)
TESTING_MODE=false

# Test email address (receives all notifications when TESTING_MODE=true)
TEST_EMAIL=test@example.com
